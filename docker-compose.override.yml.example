# Example docker-compose override file
# Copy this to docker-compose.override.yml and customize as needed

version: '3.8'

# Override services for custom configuration
services:
  # Custom MongoDB configuration
  mongodb:
    # Use different MongoDB version
    # image: mongo:8.0

    # Change ports if needed
    # ports:
    #   - "27018:27017"  # Change host port to avoid conflicts

    # Add additional environment variables
    environment:
      # Custom MongoDB settings
      # MONGO_INITDB_ROOT_USERNAME: custom_admin
      # MONGO_INITDB_ROOT_PASSWORD: custom_secure_password
      # MONGO_INITDB_DATABASE: custom_database_name

      # Performance tuning
      # MONGODB_EXTRA_FLAGS: --wiredTigerMaxCacheOverflowSizeGB=1

    # Custom volume location
    # volumes:
    #   - /custom/path/to/mongodb/data:/data/db

    # Resource limits
    # deploy:
    #   resources:
    #     limits:
    #       memory: 1G
    #       cpus: '1.0'
    #     reservations:
    #       memory: 512M
    #       cpus: '0.5'

  # Custom HRMS app configuration
  hrms-app:
    # Custom environment variables
    environment:
      # Change ports
      # PORT: 8080

      # Custom database connection
      # DB_URI: mongodb://custom_user:custom_pass@mongodb:27017/custom_db
      # MASTER_DB_URI: mongodb://custom_user:custom_pass@mongodb:27017/custom_db

      # Custom JWT settings
      # JWT_SECRET: your-production-jwt-secret
      # JWT_EXPIRATION: 12h

      # Production email settings
      # EMAIL_HOST: smtp.yourcompany.com
      # EMAIL_PORT: 587
      # EMAIL_SECURE: false
      # EMAIL_USER: noreply@yourcompany.com
      # EMAIL_PASSWORD: your-smtp-password

    # Custom ports
    # ports:
    #   - "8080:8080"

    # Custom volumes
    volumes:
      # Mount SSL certificates (for HTTPS)
      # - ./ssl:/app/ssl:ro

      # Mount custom config files
      # - ./config:/app/config:ro

    # Resource limits
    # deploy:
    #   resources:
    #     limits:
    #       memory: 1G
    #       cpus: '1.0'
    #     reservations:
    #       memory: 512M
    #       cpus: '0.5'

  # Enable additional services
  # mongo-express:
  #   profiles:
  #     - tools  # Remove this to always start with docker-compose up

  # Add Redis for caching (optional)
  # redis:
  #   image: redis:7-alpine
  #   ports:
  #     - "6379:6379"
  #   volumes:
  #     - redis_data:/data
  #   networks:
  #     - hrms_network
  #   healthcheck:
  #     test: ["CMD", "redis-cli", "ping"]
  #     interval: 10s
  #     timeout: 5s
  #     retries: 3

  # Add Nginx reverse proxy (for production)
  # nginx:
  #   image: nginx:alpine
  #   ports:
  #     - "80:80"
  #     - "443:443"
  #   volumes:
  #     - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
  #     - ./nginx/ssl:/etc/nginx/ssl:ro
  #     - ./nginx/logs:/var/log/nginx
  #   depends_on:
  #     - hrms-app
  #   networks:
  #     - hrms_network

# Additional volumes for custom services
# volumes:
#   redis_data:
#     driver: local

# Custom networks
# networks:
#   hrms_network:
#     driver: bridge
#     driver_opts:
#       com.docker.network.bridge.name: hrms_bridge
